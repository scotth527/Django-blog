{% extends "base.html" %}
{% load static %}
{% block head %}
<link rel="stylesheet" type="text/css" href="{% static 'posts/styles/style.css' %}">
{% endblock %}

{% block content %}
<div class="post col-6 mx-auto">
    <h1>Blog Feed</h1>

    <section class="mx-auto border border-dark rounded p-4">
        {% include 'posts/partials/_posts_new.html' with form=form %}
    </section>



    <section class="mt-3">
    {% if latest_post_list %}

    {% for post in latest_post_list %}
        <article class="mb-5 border border-dark rounded p-4">

        <h4><a href="{% url 'posts:detail' post.id %}">{{ post.post_title }}</a></h4>
        <p>By: <a href="{% url 'profiles:detail' post.author.id %}">{{post.author.username}}</a></p>
        <p>{{post.post_body}}</p>

        {% include 'posts/partials/_toggle_reaction.html' with id=post.id is_liked=post.is_liked_by_user type="post" reaction_count=post.reactions.count %}

        {% include 'posts/partials/_comments_new.html' with id=post.id form=comment_form %}

        </article>

    {% endfor %}

    {% else %}
        <p>No posts are available.</p>
    {% endif %}
    <section>

</div>

{% endblock %}

{% block js_block %}
    <script src="{% static 'posts/js/main.js' %}"></script>
    {% include 'posts/partials/_toggle_reaction_js.html' %}
{% endblock %}
